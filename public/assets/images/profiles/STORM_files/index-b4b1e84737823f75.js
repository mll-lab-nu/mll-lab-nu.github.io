(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(2596)}])},2596:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});var r=n(5893),a=n(1826),i=n(8781),o=n(4288),l=n(7814),s=n(7294),c=e=>{let{announcement:t,updatedAt:n}=e,[c,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{a.Z.get("/subscriptions/is-subscribed").then(e=>{d(e.data.is_subscribed)}).catch(e=>console.log(e))},[]),(0,r.jsx)("div",{className:"rounded-xl px-10 py-5 bg-white mt-4 md:w-[750px] mb-6 border-2 border-primary shadow-lg",children:(0,r.jsxs)("div",{className:"w-full flex flex-col items-center",children:[(0,r.jsx)("span",{className:"font-semibold text-primary",children:"\uD83D\uDEA7 Service is temporarily disabled"}),(0,r.jsx)("div",{className:"text-md text-gray-700 my-5 whitespace-pre-line leading-relaxed",dangerouslySetInnerHTML:{__html:t}}),(0,r.jsx)("button",{className:"btn text-primary hover:bg-primary hover:text-white btn-outline border-primary",onClick:()=>{c||u||(h(!0),a.Z.post("/subscriptions").then(()=>{d(!0)}).catch(e=>console.log(e)).finally(()=>h(!1)))},children:u?(0,r.jsx)("span",{className:"loading loading-spinner"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.G,{icon:c?o.f8k:o.FU$}),c?"You Will Be Notified When Service Resumes":"Notify Me When Service Resumes"]})}),(0,r.jsx)("p",{className:"text-xs text-gray-500 self-end mt-2",children:(0,i.CZ)(n)})]})})},d=n(4279);function u(e){let{direction:t="up",className:n,title:a,contentSummary:o,delay:l,href:c}=e,u=(0,s.useMemo)(()=>({up:10,down:-10,left:-10,right:10})[t],[t]),h="up"===t||"down"===t?"y":"x",m=(0,s.useMemo)(()=>({hidden:{opacity:0,[h]:u},show:{opacity:1,[h]:0,transition:{delay:l,type:"spring"}}}),[u,h]);return(0,r.jsx)(d.E.div,{initial:"hidden",animate:"show",viewport:{once:!0},variants:m,className:(0,i.cn)("text-center",n),children:(0,r.jsx)("a",{className:"card bg-base-100 border w-44 h-44 md:w-52 md:h-52 transition-all duration-300 hover:drop-shadow-2xl cursor-pointer items-center justify-center",href:c,target:"_blank",children:(0,r.jsxs)("div",{className:"p-2 md:p-4 overflow-y-hidden",style:{backgroundImage:"linear-gradient(to bottom, black 30%, transparent 100%)",WebkitBackgroundClip:"text",backgroundClip:"text",color:"transparent"},children:[(0,r.jsx)("p",{className:"text-primary font-semibold",children:a}),(0,r.jsx)("p",{className:"text-sm text-left px-1 mt-[0.5rem]",children:o})]})})})}var h=n(5010),m=n(9840),f=n(9417),p=n(9008),x=n.n(p),v=n(1163),g=n(3463),b={src:"/_next/static/media/arXiv_logo.fd5e317c.svg",height:24,width:18,blurWidth:0,blurHeight:0},y=n(5675),w=n.n(y),j=n(3024);function S(e){let{direction:t="up",className:n,text:a,delay:o,href:l,icon:c}=e,u=(0,s.useMemo)(()=>({up:10,down:-10,left:-10,right:10})[t],[t]),h="up"===t||"down"===t?"y":"x",m=(0,s.useMemo)(()=>({hidden:{opacity:0,[h]:u},show:{opacity:1,[h]:0,transition:{delay:o,type:"spring"}}}),[u,h]);return(0,r.jsx)(d.E.div,{initial:"hidden",animate:"show",viewport:{once:!0},variants:m,className:(0,i.cn)("text-center",n),children:(0,r.jsxs)("a",{className:"btn btn-ghost rounded-2xl",href:l,target:"_blank",children:[c,a]})})}var _=n(2710),N=n(3424);function R(e){let{direction:t="up",className:n,title:a,delay:o,href:l,target:c="_blank",icon:u}=e,h=(0,s.useMemo)(()=>({up:10,down:-10,left:-10,right:10})[t],[t]),m="up"===t||"down"===t?"y":"x",f=(0,s.useMemo)(()=>({hidden:{opacity:0,[m]:h},show:{opacity:1,[m]:0,transition:{delay:o,type:"spring"}}}),[h,m]);return(0,r.jsx)(d.E.div,{initial:"hidden",animate:"show",viewport:{once:!0},variants:f,className:(0,i.cn)(n),onClick:()=>{window.open(l,c)},children:(0,r.jsxs)("a",{className:"flex items-center w-full",children:[u,(0,r.jsx)("span",{className:"line-clamp-2",children:a})]})})}var T=()=>{var e;let t=(0,v.useRouter)(),{mode:n}=(0,m._0)(e=>e),o=[{value:"google",label:"Google",description:"General Internet Search",shortName:"Google"},{value:"semantic_scholar_oval_v1",label:"Arxiv",description:"Academic Paper Search",shortName:"Arxiv"},{value:"african_times_oval_v1",label:"The African Times",description:"The African Times Search",shortName:"African Times"},{value:"internet_archive_oval_v1",label:"Internet Archive",description:"Internet Archive Search",shortName:"Internet Archive"},{value:"acled_oval_v1",label:"ACLED",description:"ACLED Search",shortName:"ACLED"},{value:"fec_oval_v1",label:"FEC",description:"FEC Search",shortName:"FEC"}].filter(e=>"google"===e.value||"bing"!==e.value&&"semantic_scholar_oval_v1"!==e.value&&"african_times_oval_v1"!==e.value&&"internet_archive_oval_v1"!==e.value&&"acled_oval_v1"!==e.value&&"fec_oval_v1"!==e.value),[d,p]=(0,s.useState)(!0),[y,T]=(0,s.useState)(""),[C,O]=(0,s.useState)(""),[E,M]=(0,s.useState)(!1),[J,A]=(0,s.useState)([]),[k,z]=(0,s.useState)(!0),[F,Z]=(0,s.useState)(!0),[L,W]=(0,s.useState)(!0),[D,B]=(0,s.useState)(""),[I,G]=(0,s.useState)(""),[H,P]=(0,s.useState)(o[0].value),[X,V]=(0,s.useState)([]),q=(0,i.fB)(n,300),U=(0,i.Nr)(y,500),Y=()=>{let e="storm"===q?"/articles":"/conversations";a.Z.get("".concat(e,"/random-featured"),{params:{num:3}}).then(e=>{A(e.data)}).catch(e=>{console.error(e)})};(0,s.useEffect)(()=>{Y()},[q]),(0,s.useEffect)(()=>{var e;Y(),a.Z.get("/global-control").then(e=>{z(e.data.service_enabled),B(e.data.announcement),G(e.data.updated_at),Z(e.data.costorm_service_enabled),W(!1)}).catch(e=>{console.error(e)}),(null===(e=(0,i.DA)())||void 0===e?void 0:e.is_consent_form_accepted)||document.getElementById("consent_form_modal").showModal(),a.Z.get("/global-notification/view").then(e=>{0!==e.data.user_id||document.getElementById("global_notification_modal").showModal()}).catch(e=>console.log(e))},[]),(0,s.useEffect)(()=>{if(0===y.trim().length||n===m.JJ.CO_STORM||n===m.JJ.DATA_STORM){V([]);return}a.Z.get("/storm-items/articles",{params:{q:U.trim(),limit:5}}).then(e=>{V(e.data)})},[U]);let $=e=>{if(e.split(" ").length>20){(0,i.cB)("Topic cannot be longer than 20 words",3e3);return}T(e)};return(0,s.useEffect)(()=>{1===o.length?P(o[0].value):o.some(e=>e.value===H)||P("")},[o]),(0,r.jsxs)("div",{className:"flex items-center justify-center h-full",children:[(0,r.jsx)(x(),{children:(0,r.jsx)("title",{children:"New Conversation"})}),(0,r.jsxs)("div",{className:"w-full h-full flex justify-center items-center flex-col px-10 h-full flex-col",children:[!k&&n===m.JJ.STORM&&(0,r.jsx)(c,{announcement:D,updatedAt:I}),!F&&(n===m.JJ.CO_STORM||n===m.JJ.DATA_STORM)&&(0,r.jsx)(c,{announcement:D,updatedAt:I}),(0,r.jsx)("div",{className:"text-center mb-6",children:n===m.JJ.STORM?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(h.C,{text:"Create an Article",className:"text-3xl lg:text-4xl"})}):(0,r.jsx)(h.C,{text:"Start a Roundtable Conversation",className:"text-3xl lg:text-4xl"})}),(0,r.jsx)("div",{className:"w-full flex justify-center items-center",children:(0,r.jsxs)("div",{className:"w-full max-w-2xl flex flex-col",children:[(0,r.jsxs)("div",{className:"flex flex-col justify-center w-full bg-base-200 rounded-3xl",children:[(0,r.jsx)(g.Z,{className:"textarea textarea-lg bg-transparent border-none !outline-none transition-all duration-200 w-full",placeholder:"Enter the topic (English only)",maxRows:3,style:{resize:"none"},value:y,disabled:n===m.JJ.STORM?!k:n===m.JJ.CO_STORM?!F:n===m.JJ.DATA_STORM&&!L,onChange:e=>{$(e.target.value),p(!e.target.value)},autoFocus:!0}),(0,r.jsxs)("div",{className:"flex justify-between items-center px-4 pb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(N.Z,{children:(0,r.jsx)("div",{tabIndex:0,role:"button",className:"btn btn-sm rounded-xl text-primary tooltip xl:tooltip-left shadow-none flex items-center justify-center mr-1","data-tip":"Change mode",children:(0,r.jsx)(l.G,{icon:n===m.JJ.STORM?f.Xgz:f.lXL})})}),(0,r.jsx)(_.Z,{title:"Search Engine",description:"Choose where the STORM / Co-STORM / Data-STORM experts should search for information to generate content.",value:H,setValue:P,items:o,children:(0,r.jsxs)("div",{tabIndex:0,role:"button",className:"btn btn-primary btn-sm rounded-3xl tooltip xl:tooltip-right shadow-none flex items-center justify-center","data-tip":"Select search engine",children:[(0,r.jsx)(l.G,{icon:f.g4A}),null===(e=o.find(e=>e.value===H))||void 0===e?void 0:e.shortName]})})]}),(0,r.jsx)("button",{className:"btn btn-primary bg-primary !text-white btn-circle bg-opacity-100 btn-outline border-0 tooltip ".concat(d||E?"btn-disabled":""),"data-tip":"Start",onClick:()=>{M(!0),d||a.L.post("".concat(n,"/start-model"),{topic:y.trim(),writing_purpose:C,search_type:H}).then(e=>{let{topic:r,created_id:a}=e.data,o="".concat((0,i.ZV)(r),"-").concat(a),l=n===m.JJ.STORM?"article":"conversation";t.push("/".concat(l,"/").concat(o))}).catch(e=>{console.error(e),M(!1),(0,i.cB)(e.response.data,5e3)})},disabled:n===m.JJ.STORM?!k:n===m.JJ.CO_STORM?!F:n===m.JJ.DATA_STORM&&!L,children:E?(0,r.jsx)("div",{className:"loading"}):(0,r.jsx)(l.G,{icon:f.FPD})})]})]}),(0,r.jsx)("ul",{className:"menu rounded-box w-full menu-lg text-gray-600 w-full overflow-hidden text-ellipsis",children:X.map((e,t)=>{var n,a;return(0,r.jsx)("li",{className:"border-b border-gray-200 last:border-b-0 w-full",children:(0,r.jsx)(R,{title:null!==(n=e.title)&&void 0!==n?n:e.topic,delay:.05*t,href:"/article/".concat((0,i.ZV)(null!==(a=e.title)&&void 0!==a?a:e.topic),"-").concat(e.id),icon:(0,r.jsx)(l.G,{icon:f.wlW,className:"mr-4 text-gray-500"})})},"suggested-items-".concat(t))})}),0===X.length&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex md:flex-row space-x-3 mt-4 overflow-scroll md:overflow-visible",children:J.slice(0,3).map((e,t)=>{var a,o;return(0,r.jsx)(u,{title:null!==(a=e.title)&&void 0!==a?a:e.topic,contentSummary:e.content_summary,delay:.1*t,href:"/".concat(n===m.JJ.STORM?"article":"conversation","/").concat((0,i.ZV)(null!==(o=e.title)&&void 0!==o?o:e.topic),"-").concat(e.id)},t)})}),(0,r.jsx)("div",{className:"flex flex-row justify-center mt-4 space-x-4",children:[{name:n===m.JJ.STORM?"arXiv (STORM)":"arXiv (Co-STORM)",url:"storm"===n?"https://arxiv.org/abs/2402.14207":"https://www.arxiv.org/abs/2408.15232",icon:(0,r.jsx)(w(),{src:b,width:10,alt:"arXiv logo"})},{name:"GitHub",url:" https://github.com/stanford-oval/storm/",icon:(0,r.jsx)(l.G,{icon:j.zhw})}].map((e,t)=>(0,r.jsx)(S,{text:e.name,href:e.url,icon:e.icon,delay:.3+.1*t},t))}),0===y.length&&0===J.length&&(0,r.jsx)(u,{delay:0,className:"hidden",title:"",contentSummary:"",href:""})]})]})})]})]})}},3463:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var r=n(7462),a=n(3366),i=n(7294),o=i.useLayoutEffect,l=function(e){var t=i.useRef(e);return o(function(){t.current=e}),t},s=function(e,t){if("function"==typeof e){e(t);return}e.current=t},c=function(e,t){var n=(0,i.useRef)();return(0,i.useCallback)(function(r){e.current=r,n.current&&s(n.current,null),n.current=t,t&&s(t,r)},[t])},d={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},u=function(e){Object.keys(d).forEach(function(t){e.style.setProperty(t,d[t],"important")})},h=null,m=function(e,t){var n=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?n+t.borderSize:n-t.paddingSize},f=function(){},p=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],x=!!document.documentElement.currentStyle,v=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var n=p.reduce(function(e,n){return e[n]=t[n],e},{}),r=n.boxSizing;if(""===r)return null;x&&"border-box"===r&&(n.width=parseFloat(n.width)+parseFloat(n.borderRightWidth)+parseFloat(n.borderLeftWidth)+parseFloat(n.paddingRight)+parseFloat(n.paddingLeft)+"px");var a=parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),i=parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth);return{sizingStyle:n,paddingSize:a,borderSize:i}};function g(e,t,n){var r=l(n);i.useLayoutEffect(function(){var n=function(e){return r.current(e)};if(e)return e.addEventListener(t,n),function(){return e.removeEventListener(t,n)}},[])}var b=function(e){g(window,"resize",e)},y=function(e){g(document.fonts,"loadingdone",e)},w=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],j=i.forwardRef(function(e,t){var n=e.cacheMeasurements,o=e.maxRows,l=e.minRows,s=e.onChange,d=void 0===s?f:s,p=e.onHeightChange,x=void 0===p?f:p,g=(0,a.Z)(e,w),j=void 0!==g.value,S=i.useRef(null),_=c(S,t),N=i.useRef(0),R=i.useRef(),T=function(){var e,t,r,a,i,s,c,d,f,p,g,b=S.current,y=n&&R.current?R.current:v(b);if(y){R.current=y;var w=(e=b.value||b.placeholder||"x",void 0===(t=l)&&(t=1),void 0===(r=o)&&(r=1/0),h||((h=document.createElement("textarea")).setAttribute("tabindex","-1"),h.setAttribute("aria-hidden","true"),u(h)),null===h.parentNode&&document.body.appendChild(h),a=y.paddingSize,i=y.borderSize,c=(s=y.sizingStyle).boxSizing,Object.keys(s).forEach(function(e){h.style[e]=s[e]}),u(h),h.value=e,d=m(h,y),h.value=e,d=m(h,y),h.value="x",p=(f=h.scrollHeight-a)*t,"border-box"===c&&(p=p+a+i),d=Math.max(p,d),g=f*r,"border-box"===c&&(g=g+a+i),[d=Math.min(g,d),f]),j=w[0],_=w[1];N.current!==j&&(N.current=j,b.style.setProperty("height",j+"px","important"),x(j,{rowHeight:_}))}};return i.useLayoutEffect(T),b(T),y(T),i.createElement("textarea",(0,r.Z)({},g,{onChange:function(e){j||T(),d(e)},ref:_}))})},7462:function(e,t,n){"use strict";function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,{Z:function(){return r}})},3366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}n.d(t,{Z:function(){return r}})}},function(e){e.O(0,[948,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);