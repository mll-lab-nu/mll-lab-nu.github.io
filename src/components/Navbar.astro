---
import { Astronav, MenuIcon, MenuItems } from 'astro-navbar';
import Button from '../components/ui/Button.astro';
import logo from '../assets/logo-mll-lab-1.png';

const menuitems = [
	{
		title: 'Projects',
		path: '/projects',
	},
    {
		title: 'Publications',
		path: '/publications',
	},
	{
		title: 'Team',
		path: '/team',
	},
    {
		title: 'Join Us',
		path: '/joinus',
	},
];

// Get current path to determine active page
const currentPath = Astro.url.pathname;
---

<header class="py-3 shadow-soft bg-white sticky top-0 z-50">
	<div class="container mx-auto px-4">
		<!-- Desktop navigation -->
		<div class="hidden lg:flex items-center justify-between w-full">
			<!-- Left side: Lab name -->
				<div class="min-w-[200px]">
					<a
						aria-label="Home"
						href="/"
						class="flex py-1 text-lg font-heading font-semibold hover:text-primary-600 transition-colors"
					>
						<img src={logo.src} alt="MLL Lab" class="block h-8 w-auto" />
					</a>
				</div>
				
				<!-- Right side: Navigation and buttons -->
				<div class="flex items-center">
					<nav>
						<ul class="flex space-x-8">
							<li>
								<a
									aria-label="Manling Li"
									href="https://limanling.github.io"
									target="_blank"
									rel="noopener noreferrer"
									class="text-base font-bold text-secondary-600 hover:text-primary-600 transition-colors"
								>
									Manling Li
								</a>
							</li>
							{
								menuitems.map((item) => {
									const isActive = currentPath === item.path || 
										(item.path !== '/' && currentPath.startsWith(item.path));
									const isJoin = item.path === '/joinus';
									return (
										<li>
											{isJoin ? (
												<Button
													href={item.path}
													variant="primary"
													size="sm"
													aria-label={item.title}
												>
													{item.title}
												</Button>
											) : (
												<a
													aria-label={item.title}
													href={item.path}
													class={`text-base font-bold transition-colors ${isActive 
														? "text-primary-600" 
														: "text-secondary-600 hover:text-primary-600"}`}
												>
													{item.title}
												</a>
											)}
										</li>
									);
								})
							}
						</ul>
					</nav>
				</div>
			</div>
		
		<!-- Mobile navigation -->
			<div class="flex lg:hidden items-center justify-between w-full">
				<div class="flex items-center">
					<a
						aria-label="Home"
						href="/"
						class="flex py-1 text-lg font-heading font-semibold hover:text-primary-600 transition-colors min-w-[40px]"
					>
						<img src={logo.src} alt="MLL Lab" class="block h-7 w-auto" />
					</a>
				</div>
				
				<!-- Mobile menu in single line with fixed widths -->
				<div class="overflow-x-auto no-scrollbar">
					<nav>
						<ul class="flex space-x-3 whitespace-nowrap">
							<li class="flex-shrink-0">
								<a
									aria-label="Manling Li"
									href="https://limanling.github.io"
									target="_blank"
									rel="noopener noreferrer"
									class="text-xs font-bold px-2 py-1 transition-colors text-secondary-600 hover:text-primary-600"
								>
									Manling Li
								</a>
							</li>
							{
								menuitems.map((item) => {
									const isActive = currentPath === item.path || 
										(item.path !== '/' && currentPath.startsWith(item.path));
									const isJoin = item.path === '/joinus';
									return (
										<li class="flex-shrink-0">
											{isJoin ? (
												<Button
													href={item.path}
													variant="primary"
													size="sm"
													className="text-xs"
													aria-label={item.title}
												>
													{item.title}
												</Button>
											) : (
												<a
													aria-label={item.title}
													href={item.path}
													class={`text-xs font-bold px-2 py-1 transition-colors ${isActive 
														? "text-primary-600" 
														: "text-secondary-600 hover:text-primary-600"}`}
												>
													{item.title}
												</a>
											)}
										</li>
									);
							})
						}
					</ul>
					</nav>
				</div>
			</div>
	</div>
</header>

<style>
  /* Hide scrollbar but keep functionality */
  .no-scrollbar {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;     /* Firefox */
  }
  
  .no-scrollbar::-webkit-scrollbar {
    display: none;  /* Chrome, Safari, Opera */
  }
  
  /* Ensure the navbar doesn't resize */
  header {
    min-height: 64px;
    height: auto;
  }
</style>

<script>
  // No need for menu toggle functionality since menu is always visible
  document.addEventListener('DOMContentLoaded', function() {
    // Future mobile enhancements can be added here if needed
  });
  document.addEventListener('astro:page-load', function() {
    // Future mobile enhancements can be added here if needed
  });
</script>
